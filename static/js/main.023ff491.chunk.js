(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{287:function(e,t,a){e.exports=a.p+"static/media/google.dad2164f.ico"},295:function(e,t,a){e.exports=a.p+"static/media/image.6be49db2.png"},307:function(e,t,a){e.exports=a(554)},312:function(e,t,a){},316:function(e,t,a){},463:function(e,t,a){},467:function(e,t,a){},525:function(e,t,a){},531:function(e,t,a){},554:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(21),i=a.n(o),s=(a(312),a(51)),c=a.n(s),l=a(83),u=a(22),p=a(23),d=a(26),m=a(24),h=a(25),g=a(38),f=(a(316),a(567)),y=a(555),b=a(270),E=a(568),v=a(571),C=a(271),k=a(566),S=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).close=function(){return a.setState({open:!1})},a.addProductToCart=function(){a.props.addToCart(a.props.product)},a.state={},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(k.a,{trigger:r.a.createElement(E.a,{compact:!0},"Info")},r.a.createElement(k.a.Header,null,this.props.product.name),r.a.createElement(k.a.Content,{image:!0},r.a.createElement(y.a,{wrapped:!0,size:"medium",src:this.props.product.userPicture}),r.a.createElement(k.a.Description,null,r.a.createElement(v.a,null,"Listed by: ",this.props.product.userName),r.a.createElement("p",null,this.props.product.info),r.a.createElement("p",null,this.props.product.price," Rupees"),r.a.createElement(k.a.Actions,null,r.a.createElement(E.a,{onClick:this.addProductToCart,size:"large",color:"green",floated:"right"}," Buy ")))))}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).addProductToCart=function(){a.setTimeoutForBuy(),a.props.cartFunction(a.props.item)},a.changeBackBtnColor=function(){setTimeout(function(){return a.setState({color:"green",content:"Buy"})},3e3)},a.setTimeoutForBuy=function(){a.setState({color:"orange",content:"Added"},a.changeBackBtnColor())},a.state={item:{userPicture:a.props.userPicture,name:a.props.name,userName:a.props.userName,info:a.props.info,id:a.props.id,price:a.props.price,category:a.props.category},color:"green",content:"Buy"},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(f.a,null,r.a.createElement(y.a,{src:this.props.userPicture,style:{height:"250px"}}),r.a.createElement(f.a.Content,null,r.a.createElement(b.a,{color:"black",ribbon:"right"},this.props.category),r.a.createElement(f.a.Header,null,this.props.name),r.a.createElement(f.a.Meta,null,r.a.createElement("span",{className:"date"},"Listed by ",this.props.userName)),r.a.createElement(f.a.Description,null,r.a.createElement(S,{product:this.props.item,addToCart:this.props.cartFunction}))),r.a.createElement(f.a.Content,null,r.a.createElement(E.a,{color:this.state.color,floated:"right",onClick:this.addProductToCart}," ",this.state.content," "),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(v.a,{sub:!0},"Price"),r.a.createElement(C.a,{name:"rupee"}),r.a.createElement("span",null,this.props.price," Rupees"))))}}]),t}(n.Component),x=a(569),j=a(33),P=a.n(j),N=a(98),I=a.n(N),w=(a(463),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleResultSelect=function(e,t){var n=t.result;a.setState({value:""});var r=[];r.push({_id:{$oid:n.id},name:n.title,price:n.price,category:n.category,userName:n.username,userPicture:n.image,info:n.description}),a.props.filterBySearch(r)},a.handleSearchChange=function(e,t){var n=t.value;a.setState({isLoading:!0,value:n}),setTimeout(function(){a.state.value.length<1&&a.resetComponent();var e=new RegExp(I.a.escapeRegExp(a.state.value),"i"),t=function(t){return e.test(t.title)},n=I.a.filter(a.state.products,t).map(function(e){return{userName:e.username,name:e.title,info:e.description,price:Number(e.price),id:e.id,category:e.category,userPicture:e.image}});a.setState({isLoading:!1,results:I.a.filter(a.state.products,t)},a.props.updateState(n))},300)},a.state={value:"",products:[],isLoading:!1,results:[]},a.handleSearchChange=a.handleSearchChange.bind(Object(g.a)(Object(g.a)(a))),a.resetComponent=a.resetComponent.bind(Object(g.a)(Object(g.a)(a))),a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(c.a.mark(function e(){var t,a,n,r=this;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],a=function(){P()("http://localhost:3000/api/search/",{method:"POST",body:"message from search",headers:{"Access-Control-Allow-Origin":"*"}}).then(function(e){return e.json()}).then(function(e){for(var a=0;a<e.length;a++)t.push({id:e[a]._id,title:e[a].name,description:e[a].info,image:e[a].userPicture,price:e[a].price.toString(),category:e[a].category,username:e[a].userName})}).catch(function(e){console.log(e)})},n=function(e){r.setState({products:e})},e.next=5,a();case 5:return e.next=7,n(t);case 7:this.resetComponent();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"resetComponent",value:function(){this.setState({isLoading:!1,results:[],value:""})}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.value,n=e.results;return r.a.createElement("div",{style:{margin:"3px 20px 3px 20px"}},r.a.createElement("label",{className:"searchLabel"},"Search"),r.a.createElement(x.a,{loading:t,onResultSelect:this.handleResultSelect,onSearchChange:I.a.debounce(this.handleSearchChange,30,{loading:!0}),results:n,value:a}))}}]),t}(n.Component)),T=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).click=function(e){var t=e.target.value;a.setState({activeItem:t},a.props.addCategory(t))},a.state={isLoggedIn:!1,activeItem:"all"},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.setState({activeItem:this.props.category})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("label",{style:{display:"block",margin:"0 0 .28571429rem 0",color:"rgba(0,0,0,.87)",fontSize:" .92857143em",fontWeight:"700",textTransform:"none"}},"Category"),r.a.createElement("select",{className:"ui dropdown",label:"Category",placeholder:"category",onChange:this.click,style:{height:"60%"}},[{key:"a",text:"All",value:"all"},{key:"o",text:"Other",value:"Other"},{key:"h",text:"Home",value:"Home"},{key:"c",text:"Clothing",value:"Clothing"},{key:"e",text:"Entertainment",value:"Entertainment"},{key:"t",text:"Technology",value:"Technology"},{key:"i",text:"Industrial",value:"Industrial"}].map(function(e){return r.a.createElement("option",{key:e.key,value:e.value},e.text)})))}}]),t}(n.Component),L=(a(467),a(469),a(296).a.Range),M=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).onSliderChange=function(e){a.props.addPrice({myMin:e[0],myMax:e[1]}),a.setState({priceRange:{myMin:e[0],myMax:e[1]}})},a.updateLoadState=function(){a.setState({loaded:!0})},a.getSpots=function(){var e=(a.props.max-a.props.min)/10,t={},n=a.props.min;t[n]="";for(var r=0;r<10;r++)t[n+=e]="";!function(e){a.setState({marks:e,priceRange:{myMin:a.props.min,myMax:a.props.max}},a.updateLoadState)}(t)},a.state={isLoggedIn:!1,priceRange:{myMin:a.props.min,myMax:a.props.max},loaded:!1},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSpots();case 2:this.props.addPrice({priceRange:{myMin:this.state.myMin,myMax:this.state.myMax}});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center"}},this.state.loaded?r.a.createElement("div",null,r.a.createElement("label",{style:{display:"block",margin:"0 0 .28571429rem 0",color:"rgba(0,0,0,.87)",fontSize:" .92857143em",fontWeight:"700",textTransform:"none"}},"Price range"),r.a.createElement("div",{style:{marginTop:"10px",display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center"}},this.state.priceRange.myMin,r.a.createElement(L,{marks:this.state.marks,allowCross:!1,step:1,min:this.props.min,max:this.props.max,defaultValue:[this.props.min,this.props.max],style:{minWidth:"300px",width:"auto",marginLeft:20,marginRight:20},onChange:this.onSliderChange,trackStyle:[{backgroundColor:"white"},{backgroundColor:"white"}],handleStyle:[{backgroundColor:"#99ff99"},{backgroundColor:"#ffcc00"}],railStyle:{backgroundColor:"gray"}}),this.state.priceRange.myMax)):null)}}]),t}(n.Component),A=a(563),R=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.productsProp.map(function(t,a){return r.a.createElement(O,{name:t.name,key:a,id:t._id,cartFunction:e.props.cartFunction,userName:t.userName,info:t.info,userPicture:t.userPicture,price:t.price,category:t.category,item:t})});return r.a.createElement("div",{style:{marginLeft:"50px",marginRight:"50px"}},r.a.createElement("div",{className:"searchFilter",style:{padding:"20px",backgroundColor:"#e0e0d1",display:"flex",flexFlow:"row nowrap",alignItems:"center",justifyContent:"space-around",marginBottom:"40px"}},r.a.createElement(w,{filterBySearch:this.props.filterBySearch,updateState:this.props.updateState}),r.a.createElement(T,{category:this.props.category,size:"small",addCategory:this.props.addCategory}),r.a.createElement(M,{addPrice:this.props.addPrice,min:this.props.minRange,max:this.props.maxRange})),r.a.createElement("h2",null,"Products for sale:"),r.a.createElement(A.a,null),r.a.createElement("div",{className:"ui stackable cards centered",style:{marginBottom:"40px"}},t))}}]),t}(n.Component),U=(a(525),a(573)),B=a(570),F=a(88),D=a.n(F),z=(a(530),a(531),a(287)),G=a.n(z),W={apiKey:"AIzaSyCJVOXUyP9bMysoDBpqN5nDbV9yQPLq3i4",authDomain:"sellyourstuff-b27b2.firebaseapp.com",databaseURL:"https://sellyourstuff-b27b2.firebaseio.com",storageBucket:"sellyourstuff-b27b2.appspot.com"},H=new D.a.auth.GoogleAuthProvider,_=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).showState=function(){console.log(a.state)},a.state={isLoggedIn:!1},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){D.a.initializeApp(W),D.a.auth().useDeviceLanguage()}},{key:"loginWithGoogle",value:function(){var e=this;D.a.auth().signInWithPopup(H).then(function(t){var a=t.credential.accessToken,n=t.additionalUserInfo.profile;e.setState({token:a,user:n},function(){e.props.setUser(n,a)})}).then(function(t){var a=JSON.stringify(e.state.user);P()("http://localhost:3000/api/signUp/true",{method:"POST",headers:{"Access-Control-Allow-Origin":"*"},body:a}).then(function(t){e.setState({isLoggedIn:!0},function(){e.props.isLoggedIn(!0)})}).catch(function(e){console.log(e)}),e.setState({isLoggedIn:!0},function(){e.props.isLoggedIn(!0)})}).catch(function(t){e.setState({credential:t.credential,errorCode:t.code,errorMessage:t.message,isLoggedIn:!1},function(){e.props.isLoggedIn(!1)})})}},{key:"logoutWithGoogle",value:function(){var e=this;D.a.auth().signOut().then(function(){e.setState({isLoggedIn:!1,token:void 0,user:void 0},function(){e.props.isLoggedIn(!1)})}).catch(function(t){e.setState({credential:t.credential,email:t.email,errorCode:t.code,errorMessage:t.message,isLoggedIn:!0})})}},{key:"render",value:function(){var e=this,t=this.state.isLoggedIn?r.a.createElement("div",{className:"logMe"},r.a.createElement("button",{id:"logout",onClick:function(){e.logoutWithGoogle()}},"Log out")):r.a.createElement("div",{className:"logMe"},r.a.createElement(k.a,{size:"mini",dimmer:"blurring",trigger:r.a.createElement(E.a,{style:{width:"150px",fontSize:"14px"},animated:"fade",color:"olive"},r.a.createElement(E.a.Content,{visible:!0},"Login"),r.a.createElement(E.a.Content,{hidden:!0},"Sign-up for FREE")),closeIcon:!0},r.a.createElement(k.a.Header,{style:{fontSize:"1.3em"}},"Select a Login Alternative"),r.a.createElement(k.a.Content,{style:{display:"flex",flexDirection:"row",justifyContent:"center"}},r.a.createElement("button",{type:"button",id:"loginButton",onClick:function(){e.loginWithGoogle()}},r.a.createElement("img",{src:G.a,alt:"google icon"}),"Log in with Google"))));return r.a.createElement("div",{id:"login"},t)}}]),t}(n.Component),J=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).compRemoveFromCart=function(){a.props.deleteCart(a.props.product)},a.state={item:{userPicture:a.props.product.userPicture,name:a.props.product.name,userName:a.props.product.userName,info:a.props.product.info,id:a.props.product.id,price:a.props.product.price,category:a.props.product.category}},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(f.a,null,r.a.createElement(y.a,{src:this.props.product.userPicture,style:{height:"250px"}}),r.a.createElement(f.a.Content,null,r.a.createElement(f.a.Header,null,this.props.product.name),r.a.createElement(f.a.Meta,null,r.a.createElement("span",{className:"date"},"Listed by ",this.props.product.userName)),r.a.createElement(f.a.Description,null,r.a.createElement("p",null,this.props.product.info),r.a.createElement("p",null,this.props.product.price," Rupees"),r.a.createElement(E.a,{onClick:this.compRemoveFromCart,basic:!0,fluid:!0,color:"red"}," Delete from shopping basket"))))}}]),t}(n.Component),q=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).buyFromDB=function(){P()("http://localhost:3000/api/buy",{method:"POST",body:JSON.stringify(a.props.cart)}).then(function(e){return e.json()}).then(function(e){a.props.getProducts()}),a.props.emptyCart()},a.state={},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.cart;if(0===t.length)return r.a.createElement("h1",null,"Your shopping basket is empty");var a=t.map(function(t,a){return r.a.createElement(J,{key:a,id:t._id,product:t,deleteCart:e.props.deleteCart})});return r.a.createElement("div",{style:{padding:"10px"}},r.a.createElement("h1",null,"My shopping basket"),r.a.createElement(f.a.Group,{className:"ui stackable cards"},a),r.a.createElement(E.a,{onClick:this.buyFromDB,primary:!0,floated:"right",style:{marginTop:"20px",marginBottom:"30px"}},r.a.createElement(C.a,{name:"payment"}),"Finalize purchase"))}}]),t}(n.Component),Y=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleItemClick=function(e,t){var n=t.name;return a.setState({activeItem:n})},a.setUser=function(e,t){return a.props.setUser(e,t)},a.state={loginStatus:!1},a.isLoggedIn=a.isLoggedIn.bind(Object(g.a)(Object(g.a)(a))),a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"isLoggedIn",value:function(e){this.props.isLoggedIn(e),this.setState({loginStatus:e})}},{key:"render",value:function(){var e=this.props.clickEvent,t=this.props.chosenTab;return r.a.createElement(U.a,{inverted:!0,style:{borderRadius:"0",position:"sticky",width:"100%",top:"0",padding:"0 4rem 0 2rem",zIndex:"5"}},r.a.createElement(B.a,{inverted:!0,secondary:!0,style:{position:"relative"}},r.a.createElement(B.a.Item,{style:{verticalAlign:"text-top",position:"relative",top:"0",paddingTop:"0"}},r.a.createElement(y.a,{src:"./Logo.png",style:{width:"130px",height:"auto"}})),r.a.createElement("div",{id:"menuInner",className:this.state.loginStatus?"menuInnerShow":"hide"},r.a.createElement("div",{className:"menuLeftWrap"},r.a.createElement("div",{className:"products"===t?"products inline chosenMenuItem":"products inline",onClick:function(){return e("shop")}},r.a.createElement(C.a,{name:"home",style:{alignSelf:"center",width:"2em",height:"2em",margin:"auto"}}),r.a.createElement("p",{className:" productsMenu inline"},"Home")),r.a.createElement("div",{className:"profile"===t?"products inline chosenMenuItem":"products inline",onClick:function(){return e("profile")}},r.a.createElement(C.a,{name:"user",style:{alignSelf:"center",width:"2em",height:"2em",margin:"auto"}}),r.a.createElement("p",{className:" productsMenu inline"},"Profile"))),r.a.createElement(k.a,{trigger:r.a.createElement("div",{className:"cart"===t?"menuBtn inline chosenMenuItem":"menuBtn inline"},r.a.createElement("p",{className:"inline",style:{alignSelf:"center",margin:"auto"}},"My basket"),r.a.createElement(C.a,{name:"cart",style:{alignSelf:"center",width:"2em",height:"2em",margin:"auto"}}))},r.a.createElement(k.a.Content,null,r.a.createElement(q,{cart:this.props.cart,deleteCart:this.props.deleteCart,emptyCart:this.props.emptyCart,getProducts:this.props.getInitialProducts})))),r.a.createElement(B.a.Item,{position:"right",style:{padding:"0",margin:"0"}},r.a.createElement(_,{setUser:this.setUser,isLoggedIn:this.isLoggedIn}))))}}]),t}(n.Component),V=a(565),$=a(564),K=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={item:{userPicture:a.props.userPicture,name:a.props.name,userName:a.props.userName,info:a.props.info,id:a.props.id,price:a.props.price,category:a.props.category}},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(f.a,null,r.a.createElement(y.a,{src:this.props.userPicture,style:{height:"250px"}}),r.a.createElement(f.a.Content,null,r.a.createElement(f.a.Header,null,this.props.name),r.a.createElement(f.a.Meta,null,r.a.createElement("span",{className:"date"},"Listed by ",this.props.userName)),r.a.createElement(f.a.Description,null,this.props.info)),r.a.createElement(f.a.Content,null,r.a.createElement(C.a,{name:"rupee"}),this.props.price," Rupees",r.a.createElement("br",null),r.a.createElement("span",null," Category: ",this.props.category),r.a.createElement("div",{className:"ui two buttons",style:{marginTop:"20px"}},r.a.createElement(E.a,{basic:!0,color:"green"},"Edit"),r.a.createElement(E.a,{basic:!0,color:"red",onClick:function(){return console.log(e.props.id)}},"Delete"))))}}]),t}(n.Component),Q=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openEdit=function(){var e=!a.state.openEdit;a.setState({openEdit:e})},a.closeEdit=function(){var e=!a.state.openEdit;a.setState({openEdit:e})},a.updateUserInfo=function(){var e=a.props.user._id,t=a.state.editAbout,n="http://localhost:3000/api/user/"+e;P()(n,{method:"PUT",body:t}).then(function(e){}).catch(function(e){return console.error("Error:",e)}),a.closeEdit()},a.fetchUsersProd=function(){P()("http://localhost:3000/api/userProducts/"+a.props.user.email).then(function(e){return e.json()}).then(function(e){a.setState({userProducts:e})})},a.fetchAbout=function(){var e=a.props.user.id;P()("http://localhost:3000/api/users/"+e).then(function(e){return e.json()}).then(function(e){a.setState({user:e,editAbout:e.about})}).catch(function(e){console.log("Error is",e)})},a.state={user:{},openEdit:!1,userProducts:[],disabled:!0,editAbout:""},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.fetchUsersProd(),this.fetchAbout(),setInterval(function(){e.fetchUsersProd()},5e3)}},{key:"render",value:function(){var e=this,t=null;this.state.userProducts===[]?t="Empty":t=this.state.userProducts.map(function(e){return r.a.createElement(K,{name:e.name,key:e._id,id:e._id,userName:e.userName,info:e.info,userPicture:e.userPicture,price:e.price,category:e.category})});return r.a.createElement("div",{style:{marginLeft:"50px",marginRight:"50px"}},r.a.createElement("h2",null,"My profile"),r.a.createElement(A.a,null),r.a.createElement("div",{className:"ui raised card centered fluid",style:{backgroundColor:"F4F4F4"}},r.a.createElement("div",{className:"content profile"},r.a.createElement(y.a,{src:this.props.user.picture,alt:"profile picture",size:"small",circular:!0}),r.a.createElement("h2",null,this.props.user.name),r.a.createElement("div",{className:"divider"}),r.a.createElement("p",null,this.props.user.email),r.a.createElement("p",{id:"about me"},"About me:"),this.state.editAbout,r.a.createElement(E.a,{content:"Edit",icon:"edit",floated:"right",style:{marginTop:"15px"},disabled:this.state.openEdit,onClick:function(){return e.openEdit()}}),this.state.openEdit?r.a.createElement("div",null,r.a.createElement(V.a,{fluid:"true"},r.a.createElement($.a,{style:{marginTop:"20px"},placeholder:"Tell us more about you",name:"aboutMe",onChange:function(t){0===t.target.value.length&&e.setState({disabled:!0,editAbout:e.props.user.about}),t.target.value.length>0&&e.setState({disabled:!1,editAbout:t.target.value})}})),r.a.createElement(E.a,{content:"Save",icon:"save",floated:"right",style:{marginTop:"15px"},disabled:this.state.disabled,onClick:function(){return e.updateUserInfo()}}),r.a.createElement(E.a,{content:"Close",icon:"close",floated:"right",style:{marginTop:"15px"},onClick:function(){return e.closeEdit()}})):null)),r.a.createElement(E.a,{onClick:function(){return e.props.tabClick("create")},color:"green",floated:"right"},r.a.createElement(C.a,{name:"plus"})," Create new item"),r.a.createElement("h2",{onClick:this.fetchUsersProd},"My ads to sell:"),r.a.createElement(A.a,null),r.a.createElement("div",{className:"ui stackable cards",style:{width:"80%",marginBottom:"40px"}},t))}}]),t}(n.Component),X=a(295),Z=a.n(X),ee=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"landingPage"},r.a.createElement(y.a,{src:Z.a,style:{height:"50%"},centered:!0,title:"Image from shutterstock.com 1026506494"}),r.a.createElement("h1",null,"Welcome to E.BUY"),r.a.createElement("h2",null,"The online flea market"),r.a.createElement(E.a,{style:{width:"220px",height:"50px",fontSize:"16px"},animated:"fade",color:"orange",onClick:this.props.changeToShop},r.a.createElement(E.a.Content,{visible:!0},"Go to market"),r.a.createElement(E.a.Content,{hidden:!0},"NOW!")))}}]),t}(n.Component),te=a(99),ae=a.n(te),ne="https://firebasestorage.googleapis.com/v0/b/sellyourstuff-b27b2.appspot.com/o/productImages%2Fplaceholder.png?alt=media&token=230fbf95-36cf-4508-a1bb-985511142a86",re={backgroundColor:"#f4f4f4",borderRadius:"10px",width:"80%",height:"90%",padding:"2rem",boxShadow:"0 0 30px rgba(0, 0, 0, 0.2)",margin:"auto"},oe={display:"block",margin:"0 0 .28571429rem 0",color:"rgba(0,0,0,.87)",fontSize:" .92857143em",fontWeight:"700",textTransform:"none"},ie=[{key:"o",text:"Other",value:"Other"},{key:"h",text:"Home",value:"Home"},{key:"c",text:"Clothing",value:"Clothing"},{key:"e",text:"Entertainment",value:"Entertainment"},{key:"t",text:"Technology",value:"Technology"},{key:"i",text:"Industrial",value:"Industrial"}],se=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).sendProduct=function(e){console.log("sendfile"),fetch("http://localhost:3000/api/createProduct",{method:"POST",headers:{"Access-Control-Allow-Origin":"*"},body:e}).then(function(e){console.log("Lyckades skicka req till API:et och ladda upp ny produt i databasen:",e),a.props.tabClick("profile"),a.props.getProducts()}).catch(function(e){console.log(e)})},a.validateImageLink=function(e,t){var a=new Image;a.onload=function(){t(!0)},a.onerror=function(){t(!1)},a.src=e},a.validatePrice=function(e){var t;t=isNaN(e)?1:Number(e),a.setState({price:t})},a.onCancelCreate=function(){a.setState({name:"",price:1,category:"Other",userName:a.props.userProps.name,userEmail:a.props.userProps.email,imageName:"",userPicture:ne,info:""}),a.props.tabClick("profile")},a.showFileName=function(e){var t;t=e?e.name:"No product image was chosen",a.setState({imageName:t})},a.uploadFile=function(){var e=ne,t=document.getElementById("photoUpload").files[0];if(t){var n=ae.a.storage().ref().child("/productImages/"+t.name).put(t,{contentType:"image/jpeg"});n.on(ae.a.storage.TaskEvent.STATE_CHANGED,function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+t+"% done"),e.state){case ae.a.storage.TaskState.PAUSED:console.log("Upload is paused");break;case ae.a.storage.TaskState.RUNNING:console.log("Upload is running")}},function(e){switch(e.code){case"storage/unauthorized":console.log("User do not have permission to access the object");break;case"storage/canceled":console.log("User canceled the upload");break;case"storage/unknown":console.log("Unknown error occurred, inspect error.serverResponse")}},function(){n.snapshot.ref.getDownloadURL().then(function(t){console.log("File available at",t),console.log("image updated"),e=t,console.log("validating image link "),a.validateImageLink(e,function(t){!0===t?a.setState({userPicture:e},function(){console.log("firebase update. ",a.state);var e=JSON.stringify(a.state);a.sendProduct(e)}):a.setState({userPicture:ne},function(){console.log("firebase update. ",a.state);var e=JSON.stringify(a.state);a.sendProduct(e)})})})})}else if(!t)return console.log("you did not pick an image, you recived a default image"),e=ne,void a.setState({userPicture:e},function(){console.log("default update. ",a.state);var e=JSON.stringify(a.state);a.sendProduct(e)})},a.state={name:"",price:1,category:"Other",userName:a.props.userProps.name,userEmail:a.props.userProps.email,imageName:"",userPicture:ne,info:""},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(V.a,{style:re},r.a.createElement(v.a,{as:"h2",dividing:!0},r.a.createElement(C.a,{name:"gift"}),r.a.createElement(v.a.Content,null,"Create a new add")),r.a.createElement(V.a.Field,{required:!0},r.a.createElement("label",null,"Title"),r.a.createElement("input",{placeholder:"What are you selling",name:"name",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),r.a.createElement(V.a.TextArea,{required:!0,label:"Product information",placeholder:"Tell us more about youre product...",value:this.state.info,onChange:function(t){return e.setState({info:t.target.value})}}),r.a.createElement("label",{style:oe},"Category"),r.a.createElement("select",{className:"ui dropdown",label:"Category",placeholder:"category",onChange:function(t){return e.setState({category:t.target.value})}},ie.map(function(e){return r.a.createElement("option",{key:e.key,value:e.value},e.text)})),r.a.createElement(V.a.Field,null,r.a.createElement("label",null,"Price"),r.a.createElement("input",{name:"price",type:"number",min:"1",value:this.state.price,onChange:function(t){return e.validatePrice(t.target.value)}})),r.a.createElement("div",{style:{margin:"2rem 0 0 0"}},r.a.createElement("label",{htmlFor:"photoUpload",className:"ui icon button"},r.a.createElement(C.a,{name:"upload"}),"Upload image \xa0\xa0\xa0\xa0\xa0         "),r.a.createElement("input",{type:"file",id:"photoUpload",name:"productPhoto",onChange:function(t){return e.showFileName(document.getElementById("photoUpload").files[0])},style:{display:"none"}})),r.a.createElement("p",{style:{margin:"2rem 0 0 0"}}," ",this.state.imageName),r.a.createElement("br",null),this.state.name.length>0&&this.state.info.length>0?r.a.createElement(E.a,{onClick:function(){return e.uploadFile()},color:"green"}," Submit "):r.a.createElement(E.a,{disabled:!0,color:"green"}," Submit "),r.a.createElement(E.a,{type:"button",basic:!0,color:"red",onClick:function(){return e.onCancelCreate()}}," Cancel ")))}}]),t}(r.a.Component),ce=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).filterBySearch=function(e){a.setState({products:e})},a.setUserState=function(e,t){a.setState({user:e,credentials:t})},a.isLoggedIn=function(e){a.setState({isLoggedIn:e,currentTab:"shop"}),a.getUser()},a.updateState=function(e){a.setState({products:e})},a.changeToShop=function(){return a.setState({currentTab:"shop"})},a.getUser=function(){var e="http://localhost:3000/api/users/"+a.state.user.id;P()(e,{method:"GET"}).then(function(e){return e.json()}).then(function(e){a.setState({user:e})}).catch(function(e){console.log("Error is",e)})},a.setUserData=function(e){a.setState({user:e})},a.emptyShoppingCart=function(){a.setState({shoppingCart:[]})},a.aggregateMaxAndMin=function(){P()("http://localhost:3000/api/getPriceRange",{method:"GET",headers:{"Access-Control-Allow-Origin":"*"}}).then(function(e){return e.json()}).then(function(e){a.setState({max:e.max,min:e.min,priceRange:{myMin:e.min,myMax:e.max},loaded:!0},function(){})}).catch(function(e){console.log(e)})},a.addToCart=function(e){var t=a.state.shoppingCart,n=!1;if(t.forEach(function(t){t.id!==e.id&&t.id!==e._id||(n=!0)}),!1===n){var r=e;r.id=e._id,t.push(r)}a.setState({shoppingCart:t})},a.removeFromCart=function(e){var t=a.state.shoppingCart.filter(function(t){return t.id!==e.id});a.setState({shoppingCart:t})},a.updateLoadState=function(){a.setState({loaded2:!0})},a.getInitialProducts=function(){P()("http://localhost:3000/api/products/",{method:"GET",headers:{"Access-Control-Allow-Origin":"*"}}).then(function(e){return e.json()}).then(function(e){a.setState({products:e},a.updateLoadState)}).catch(function(e){console.log(e)})},a.filterMeBabyOhYeahFilterMePlease=function(e,t){var n;t.myMin===a.state.min&&t.myMax===a.state.max||"number"!=typeof t.myMin||"number"!=typeof t.myMax?"all"===e?P()("http://localhost:3000/api/products/",{method:"GET",headers:{"Access-Control-Allow-Origin":"*"}}).then(function(e){return e.json()}).then(function(e){a.setState({products:e})}).catch(function(e){console.log(e)}):(n="",P()("http://localhost:3000/api/filter/"+e+n,{method:"GET",headers:{"Access-Control-Allow-Origin":"*"}}).then(function(e){return e.json()}).then(function(e){a.setState({products:e})}).catch(function(e){console.log(e)})):(n="?myMin="+t.myMin+"&myMax="+t.myMax,P()("http://localhost:3000/api/filter/"+e+n,{method:"GET",headers:{"Access-Control-Allow-Origin":"*"}}).then(function(e){return e.json()}).then(function(e){a.setState({products:e})}).catch(function(e){console.log(e)}))},a.addCategory=function(e){a.setState({category:e},function(){a.filterMeBabyOhYeahFilterMePlease(e,a.state.priceRange)})},a.addPrice=function(e){a.setState({priceRange:e},function(){a.filterMeBabyOhYeahFilterMePlease(a.state.category,e)})},a.state={isLoggedIn:!1,currentTab:"landing",products:[],shoppingCart:[],searchResults:[],max:Number,min:Number,category:"all",priceRange:{},loaded:!1,loaded2:!1},a.tabClick=a.tabClick.bind(Object(g.a)(Object(g.a)(a))),a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"tabClick",value:function(e){this.setState({currentTab:e})}},{key:"componentDidMount",value:function(){var e=Object(l.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.aggregateMaxAndMin();case 2:return e.next=4,this.getInitialProducts();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.user?r.a.createElement(Q,{tabClick:this.tabClick,user:this.state.user}):null,t=this.state.isLoggedIn?r.a.createElement("div",{style:{textAlign:"center",marginBottom:"20px",marginLeft:"50px",marginRight:"50px"}},r.a.createElement("h1",null," Welcome ",this.state.user.given_name,"! "),r.a.createElement(A.a,null)):null,a="landing"!==this.state.currentTab||this.state.isLoggedIn?null:r.a.createElement(ee,{changeToShop:this.changeToShop}),n=null;"shop"===this.state.currentTab&&(n=r.a.createElement(R,{productsProp:this.state.products,minRange:this.state.min,maxRange:this.state.max,addCategory:this.addCategory,addPrice:this.addPrice,category:this.state.category,cartFunction:this.addToCart,filterBySearch:this.filterBySearch,updateState:this.updateState}));var o=this.state.user?r.a.createElement(se,{tabClick:this.tabClick,userProps:this.state.user,getProducts:this.getInitialProducts}):null;return r.a.createElement("div",{className:"App"},this.state.loaded&&this.state.loaded2?r.a.createElement("div",null,r.a.createElement(Y,{setUser:this.setUserState,isLoggedIn:this.isLoggedIn,clickEvent:this.tabClick,chosenTab:this.state.currentTab,cart:this.state.shoppingCart,deleteCart:this.removeFromCart,emptyCart:this.emptyShoppingCart,getInitialProducts:this.getInitialProducts}),r.a.createElement("main",{className:"mainView"},r.a.createElement("div",{id:"landingPage",className:"landing"===this.state.currentTab&&!1===this.state.isLoggedIn?"show":"hide"},a),r.a.createElement("div",{id:"productsPage",className:"shop"===this.state.currentTab?"show":"hide"},t,n),r.a.createElement("div",{id:"profilePage",className:"profile"===this.state.currentTab&&!0===this.state.isLoggedIn?"show":"hide"},e),r.a.createElement("div",{id:"createPage",className:"create"===this.state.currentTab&&!0===this.state.isLoggedIn?"show":"hide"},o))):null)}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[307,2,1]]]);
//# sourceMappingURL=main.023ff491.chunk.js.map